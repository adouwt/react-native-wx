# react-native-wx
æ¨¡ä»¿å¾®ä¿¡ç•Œé¢çš„RN

## ä½¿ç”¨
```
  git clone https://github.com/adouwt/react-native-wx.git
  cd react-native-wx
  npm install 
  npm run ios or npm run and
```
åšå®¢é¢„è§ˆåœ°å€ï¼š

[å…ˆé¢„è§ˆçœ‹çœ‹](https://segmentfault.com/a/1190000019333809)


### RN ä»ä¸Šæ‰‹åˆ°â€œæ”¾å¼ƒâ€
å‰è¨€ï¼š react-nativeï¼Œç›¸å¯¹äºæœ€è¿‘ğŸ”¥çš„é£èµ·çš„flutterï¼Œä¸ç®—æ˜¯ä¸€ä¸ªæ–°æŠ€æœ¯ï¼Œ2015å¹´Facebook å¼€æºï¼Œåˆ°ç°åœ¨å·²ç»4 5 ä¸ªå¹´å¤´ï¼Œä¸€ç›´åœ¨ç»´æŠ¤å½“ä¸­ï¼Œä½†æ˜¯è‡³ä»Šæœªå‘å¸ƒ v1 ç‰ˆæœ¬ï¼Œç›®å‰å·²ç»æ›´æ–°åˆ°0.59ã€‚ è¯¥æŠ€æœ¯ç›®æ ‡ï¼š è·¨å¹³å°å®ç°åŸç”Ÿåº”ç”¨ã€‚ GitHub start æ•°ç›®ï¼š 77602ï¼ˆ2019-5-29ï¼‰ã€‚
![clipboard.png](/img/bVbteHp)
æ–‡ç« å†…ï¼Œå›¾ç‰‡å¾ˆå¤šï¼Œå æ®äº†ä¸€å®šçš„ç¯‡å¹…ã€‚ç­é—¨å¼„æ–§ä¹‹ä½œï¼Œè‹¥æœ‰å¤§ç¥è§åˆ°ï¼Œæ•¬è¯·æŒ‡æ•™ï¼Œæœ‰ä¸å¯¹ä¸åˆç†ä¹‹å¤„ï¼Œæ•¬è¯·æŒ‡å‡ºï¼æˆ‘æ˜¯è¿©ä¼¶è´°ï¼
##æ­£æ–‡
githubåœ°å€ï¼š https://github.com/adouwt/react-native-wx

nodejsåå°ï¼šhttps://github.com/adouwt/nodejsAPI 
### 1ã€é¡¹ç›®é¢„è§ˆ
ç°åœ¨å·²å®Œæˆçš„åŠŸèƒ½å±•ç¤ºï¼š
![å›¾ç‰‡æè¿°][1]

å…¥æ‰‹demoé¡¹ç›®ï¼Œæœ¬æ‰“ç®—æ¨¡ä»¿å¾®ä¿¡çš„åŠŸèƒ½åšä¸€éã€‚ç°åœ¨å·²ç»å®Œæˆå¾®ä¿¡çš„ä¸€çº§ç•Œé¢ã€‚æˆªå›¾å¦‚ä¸‹ï¼š
é¦–é¡µï¼š

![clipboard.png](/img/bVbteIc)

é€šä¿¡å½•ï¼š


![clipboard.png](/img/bVbteIA)


å‘ç°ï¼š

![clipboard.png](/img/bVbteJb)


æˆ‘ï¼š

![clipboard.png](/img/bVbteIj)

æœ‹å‹åœˆï¼ˆä¸Šæ‹‰åŠ è½½å’Œä¸‹æ‹‰åˆ·æ–°ï¼‰ï¼š 
ï¼ˆæœªå®Œæˆï¼Œå°±æ˜¯è°ƒç”¨äº†æ¥å£ï¼‰

![clipboard.png](/img/bVbteIM)

èŠå¤©ç•Œé¢ï¼š


![clipboard.png](/img/bVbteIV)

æ‘„åƒå¤´æ‹ç…§ï¼ˆå®‰å“è™šæ‹Ÿæœºï¼‰ï¼š


![clipboard.png](/img/bVbtfpo)



----------



é¡¹ç›®ä¸»è¦ä½¿ç”¨æ’ä»¶ï¼ˆåº“ï¼‰ï¼š 

 1. react-native-camera ï¼ˆè°ƒç”¨æ‘„åƒå¤´ï¼‰  
 2. react-native-vector-icons ï¼ˆå›¾æ ‡åº“ï¼‰
 3. react-navigation ï¼ˆè·¯ç”±å¯¼èˆªï¼‰

å‚è€ƒèµ„æ–™ï¼š
    

 - https://reactnative.cn/
 - https://oblador.github.io/react-native-vector-icons/
 - https://github.com/react-native-community/react-native-camera/blob/master/docs/RNCamera.md
 - https://shenbao.github.io/ishehui/html/RN%20%E5%9F%BA%E7%A1%80/React%20Native%20%E6%A0%B7%E5%BC%8F%E8%A1%A8%E6%8C%87%E5%8D%97.html

### 2ã€é¡¹ç›®è¿è¡Œ
ï½å‰æï¼š ç¯å¢ƒæ­å»ºåŠç›¸å…³è½¯ä»¶ã€å®‰å“æˆ–è€…ios çš„æ¨¡æ‹Ÿå™¨å®‰è£…ï¼Œ å‚è€ƒå®˜ç½‘å³å¯ï¼Œhttps://reactnative.cn/docs/getting-started.html
#### git clone https://github.com/adouwt/react-native-wx.git
#### cd react-native-wx
#### npm i
#### npm run and (å®‰å“)
#### npm run ios (è‹¹æœ)
ï¼ˆä¸Šé¢çš„è¿è¡Œå‘½ä»¤ï¼Œæˆ‘åœ¨package.json åšäº†å°è£…ï¼Œä¸€äº›å¤„ç†ç¼–è¯‘é”™è¯¯çš„å‘½ä»¤ï¼Œæˆ‘ä¹Ÿå·²ç»å°è£…è¿›å»ï¼‰

![clipboard.png](/img/bVbteL2)

æ‰§è¡Œå‘½ä»¤åï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºnodejs æ‰§è¡Œç»ˆç«¯ç•Œé¢ï¼Œè¿™ä¸ªæ˜¯ç¨‹åºè¿è¡Œçš„ä¸€ä¸ªç›‘æ§

![clipboard.png](/img/bVbtfoP)
æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºï¼š
![å›¾ç‰‡æè¿°][2]

### 3ã€åˆ†æ­¥å®ç°
#### 3.1 åˆå§‹åŒ–å¹¶è¿è¡Œé¡¹ç›®
    ```
    react-native init AwesomeProject
    react-native run-ios
    ```
#### 3.2 é¡¹ç›®ç»“æ„è¯´æ˜ 

#### 3.3 æ–°å»ºæ–‡ä»¶å¤¹ appï¼Œæ¥ä¸‹æ¥æ‰€æœ‰çš„æºç æ–‡ä»¶ä»£ç å°†åœ¨è¿™é‡Œ

![clipboard.png](/img/bVbteNs)
 
ç›®å‰æ–°å»º componentç»„ä»¶ã€pageé¡µé¢ã€åŠutils å·¥å…·ä¸‰ä¸ªï¼Œåé¢ä¼šæ ¹æ®éœ€è¦å»ºæ–°çš„æ–‡ä»¶å¤¹ã€‚

![clipboard.png](/img/bVbteNJ)
å››ä¸ªä¸€çº§ç•Œé¢+ èŠå¤©å’Œæœ‹å‹åœˆçš„ç•Œé¢

#### 3.4 å®‰è£…æ’ä»¶åšé¡µé¢å¯¼èˆªè·³è½¬
#### 3.4.1 npm install react-navigation -S

#### 3.4.2 ä¿®æ”¹é¡¹ç›®æ–‡ä»¶ä¸‹çš„App.js
è¿™æ˜¯æ ¹æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„é¡µé¢å¯¼èˆªå†™è¿›è¿™ä¸ªç»„ä»¶ï¼Œæˆ‘é¡¹ç›®ä¸­å·²ç»å®Œæˆä»£ç ç‰‡æ®µï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
import React from 'react';
import HomeScreen  from './app/page/Home'
import DiscoverScreen from './app/page/Discover'
import UserListScreen from './app/page/UserList'
import MyScreen from './app/page/My'
import CameraComponent from './app/component/camera'
import ChatScreen from './app/page/Chat'
import FriendCircle from './app/page/friendCircle'
import Icon from "react-native-vector-icons/Ionicons";
import { View, Text } from 'react-native';
import { createAppContainer, createBottomTabNavigator, createStackNavigator, createDrawerNavigator } from 'react-navigation'; // Version can be specified in package.json


const HomeNav = createStackNavigator({
  Home: {
    screen: HomeScreen,
    navigationOptions:{
      headerTitle:'å¾®ä¿¡',
      headerBackTitle:null,
    }
  },
})
const UserListNav = createStackNavigator({
  UserList: {
    screen: UserListScreen,
  },
})

// äºŒçº§é¡µé¢å†™è¿›ä¸€çº§é¡µé¢ä¸­
const DiscoverNav = createStackNavigator(
  {
    Discover: {
      screen: DiscoverScreen,
    },
  }
)

const MyNav = createStackNavigator(
  {
    My: MyScreen,
  }
);

let BottomNav = createBottomTabNavigator(
  // createBottomTabNavigator ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªé¡µé¢è·¯ç”±ï¼Œä¸€ä¸ªæ˜¯è·¯ç”±é…ç½®
  {
    å¾®ä¿¡: HomeNav,
    é€šè®¯å½•: UserListNav,
    å‘ç°: DiscoverNav,
    æˆ‘: MyNav,
  },
  {
    defaultNavigationOptions: ({ navigation }) => ({
      tabBarIcon: ({ focused, horizontal, tintColor }) => {
        const { routeName } = navigation.state;
        let iconName;
        let badgeCount = 3
        switch(routeName) {
          case 'å¾®ä¿¡':
            iconName = 'ios-text';
            break;
          case 'é€šè®¯å½•':
            iconName = 'md-person-add';
            break;
          case 'å‘ç°':
            iconName = 'md-compass';
            break;
          case 'æˆ‘':
            iconName = 'ios-person';
            break;
        }
        iconColor = `${focused ? '#1AAD19' : '#4D4D4D'}`;

        return (
          <View>
            <Icon name={iconName} size={18} color={iconColor}></Icon>
            { routeName === 'å‘ç°' && badgeCount > 0 && (
              <View style={{
                // If you're using react-native < 0.57 overflow outside of the parent
                // will not work on Android, see https://git.io/fhLJ8
                position: 'absolute',
                right: -6,
                top: -3,
                backgroundColor: 'red',
                borderRadius: 6,
                width: 12,
                height: 12,
                justifyContent: 'center',
                alignItems: 'center',
                color: '#fff'
              }}>
                <Text style={{ color: '#fff', fontSize: 10, fontWeight: 'bold' }}>{badgeCount}</Text>
              </View>
            )}
          </View>
        )
      },
    }),
    tabBarOptions: {
      activeTintColor: '#1AAD19',
      inactiveTintColor: '#4D4D4D',
    },
  }
);

let RootNav = createStackNavigator({
  BottomNav: {
    screen: BottomNav,
    navigationOptions: ({ navigation, screenProps }) => {
      return {
        header: null,
      };
    }
  },
  Camera: {
    screen: CameraComponent
  },
  Chat: {
    screen: ChatScreen
  },
  FriendCircle: {
    screen: FriendCircle
  }
})

export default createAppContainer(RootNav);
```
è¿™é‡Œéœ€è¦å‚è€ƒå¯¼èˆªèµ„æ–™ï¼š https://reactnavigation.org/docs/en/tab-based-navigation.html

æ–‡æ¡£è®²çš„å¾ˆæ˜ç™½ï¼Œçœ‹çœ‹ç¤ºä¾‹å°±çŸ¥é“æ€ä¹ˆç”¨äº†ï¼Œæˆ‘ä¸‹é¢è®²ä¸¤ä¸ªæ³¨æ„å†…å®¹ï¼Œè¿™ä¹Ÿæ˜¯åœ¨è¿™å‡ å¤©çš„å­¦ä¹ ä¸­é‡åˆ°çš„troubles.

#### aã€åˆ›å»ºåº•éƒ¨å¯¼èˆªï¼š
createBottomTabNavigator æ–¹æ³•ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªé¡µé¢è·¯ç”±ï¼Œä¸€ä¸ªæ˜¯è·¯ç”±é…ç½®ï¼Œ
ç›´æ¥çœ‹è¿™ä¸ªæ–¹æ³•åå­—ï¼Œå°±çŸ¥é“è¿™ä¸ªæ˜¯åˆ›å»ºåº•éƒ¨å¯¼èˆªçš„æ–¹æ³•ã€‚
--ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé¡µé¢è·¯ç”±ï¼Œè¿™é‡Œä½ å†™å¤šå°‘tab, åº•éƒ¨å°±ä¼šå‘ˆç°å‡ ä¸ªtab å‡åŒ€åˆ†å¸ƒï¼Œï¼ˆä¸è¦æœ‰æ ç²¾æ¥è¢­ï¼Œâ€œè¦æ˜¯æœ‰100ä¸ªtab,æ€ä¹ˆæ˜¾ç¤ºï¼Ÿâ€ï¼Œå“ªæœ‰è¿™æ ·çš„è®¾è®¡ï¼Œä½ è¦æ˜¯æœ‰100ä¸ªtabï¼Œä½ è¯•è¯•è¿™æ ·æ’ç‰ˆï¼Ÿï¼‰

![clipboard.png](/img/bVbtfte)

å‚æ•°çš„key,å°±æ˜¯åº•éƒ¨æ˜¾ç¤ºçš„åç§°ï¼Œvalue å°±æ˜¯è¿™ä¸ªé¡µé¢ screenã€‚é¡µé¢screenå¯ä»¥å•ç‹¬å®šä¹‰å¼•å…¥ï¼Œå¦‚ä¸‹ï¼š

![clipboard.png](/img/bVbtfuH)

å¯ä»¥åƒç¬¬ä¸€ä¸ªDiscoverNavï¼Œä»¥screenå®šä¹‰çš„æ–¹å¼å¼•å…¥ï¼Œä¹Ÿå¯ä»¥ç®€ç•¥ä½¿ç”¨ï¼Œå¦‚ä¸‹é¢çš„MyNav

-- ç¬¬äºŒä¸ªå‚æ•°ï¼Œè·¯ç”±é…ç½®ï¼Œåœ¨è¿™é‡Œé…ç½®ï¼Œåº•éƒ¨å¯¼èˆªçš„æ ·å¼ã€å›¾æ ‡ã€foucs çŠ¶æ€åŠbadgeç­‰
tabBarIcon é¡¾åæ€ä¹‰ï¼Œé…ç½®ä»–çš„å›¾æ ‡ï¼Œæˆ‘è¿™é‡Œæ ¹æ®navigation.state é‡Œçš„routeName æ¥åŒºåˆ†é¡µé¢è·¯ç”±ï¼Œä»è€Œä¸ºä»–ä»¬é…ç½®ä¸åŒçš„ icon

![clipboard.png](/img/bVbtfyR)

#### bã€äºŒçº§é¡µé¢æ³¨å…¥Stack Navigator
æˆ‘ä»¬å†™çš„é¡µé¢è¦æ³¨å…¥æˆ‘ä»¬çš„å¯¼èˆªï¼Œè¿™æ ·æ‰èƒ½è®¿é—®åˆ°ï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨çš„æ˜¯react-navigationçš„ createStackNavigaor çš„createStackNavigatoræ–¹æ³•ï¼Œå¦‚å›¾ï¼š

![clipboard.png](/img/bVbtfDX)

#### 3.4.3 å…·ä½“é¡µé¢é€»è¾‘
è¿™é‡Œè®²ä¸¤ä¸ªé¡µé¢ï¼Œä¸€ä¸ªæ˜¯é™æ€é¡µé¢ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨æ¥å£çš„é•¿åˆ—è¡¨çš„ç•Œé¢ã€‚

##### é™æ€é¡µé¢ discoverScreen
**å¸ƒå±€æ–¹å¼**ï¼š flexï¼Œ å±æ€§å’Œweb ä¹¦å†™ä¸ä¸€è‡´ï¼Œè¯­æ³•å‚è€ƒè¿™ä¸ªä¸å®Œå…¨æ‰‹å†Œï¼š https://shenbao.github.io/ishehui/html/RN%20%E5%9F%BA%E7%A1%80/React%20Native%20%E6%A0%B7%E5%BC%8F%E8%A1%A8%E6%8C%87%E5%8D%97.html

**ç‚¹å‡»æŒ‰é’®å°è£…ï¼š** RN é‡Œé¢çš„ç‚¹å‡»æ–¹æ³•åªèƒ½ç»‘å®šåœ¨å®ƒçš„button ç»„ä»¶ä¸Šï¼Œæä¾›çš„å…¶ä»–ç»„ä»¶æˆ‘ä»¬ä¹ˆåŠæ³•ç›´æ¥ç»‘å®šäº‹ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå°è£…å­ç»„ä»¶å¯ä»¥ç»‘å®šäº‹ä»¶çš„è‡ªå®šä¹‰æŒ‰é’®-Touchable ç³»åˆ— ï¼ˆTouchableOpacity ï¼ŒTouchableNativeFeedbackï¼‰å¦‚ä¸‹ä¹¦å†™å¯ä»¥ç‚¹å‡»çš„itemï¼š

![clipboard.png](/img/bVbtf0T)

**æ³¨æ„ï¼š** ä¸Šé¢åˆ’çº¿çš„ä½ç½®ï¼Œè¿™ä¸ªæ ·å¼ï¼ˆflex: 1, flexDirection: 'row',ï¼‰è¦å†™ä¸Šã€‚æœ‰ä¸€å®šçš„å…¼å®¹é—®é¢˜ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ ·å¼ï¼Œåœ¨å®‰å“ä¸Šæ— æ³•ç‚¹å‡»ï¼Œiosä¸Šæ²¡æœ‰å½±å“ã€‚è¯´æ˜åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¿˜è¦å¤„ç†ä¸€å®šçš„å¹³å°å·®å¼‚é—®é¢˜ï¼ŒçœŸæ­£å®ç°æ— å·®å¼‚çš„è·¨å¹³å°è¿˜æ˜¯æœ‰äº›å›°éš¾ã€‚

**é¡µé¢headerï¼š**

![clipboard.png](/img/bVbtfKG)
 
åœ¨static é‡Œé¢æ²¡åŠæ³•ç›´æ¥è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•ï¼Œéœ€è¦å€ŸåŠ© navigation æ¥åšä¸€ä¸‹ä¸­è½¬ï¼Œè°ƒç”¨setParamså°†æ–¹æ³•æ”¾è¿›navigationé‡Œé¢ï¼Œè¿™æ ·åœ¨staticé‡Œé¢å°±å¯ä»¥ä½¿ç”¨navigation.getParams è·å–è¿™ä¸ªæ–¹æ³•äº†ï¼Œå¦‚ä¸‹ï¼š

![clipboard.png](/img/bVbtfNg)

**è¿‡æ¸¡åŠ¨ç”»**

è¿™ä¸ªæ–¹æ³•å®ç°çš„æ˜¯ä¸€ä¸ª åŠ¨ç”»ï¼Œæˆ‘ä»¬åœ¨ å†™web çš„æ—¶å€™ï¼Œä¼šç”¨ transform  transaction è¿™æ ·çš„åŠ¨ç”»å±æ€§ï¼ŒRNé‡Œé¢ä¹Ÿæ”¯æŒè¿™æ ·çš„åŠ¨ç”»ï¼Œå…·ä½“è¯­æ³•æœ‰æ‰€å·®å¼‚ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç»å¯¹å®šä½é‡Œé¢çš„ rightå€¼ åšè¿‡æ¸¡æ•ˆæœã€‚
å¼€å§‹å®šä¹‰ï¼š

![clipboard.png](/img/bVbtf1W)

åœ¨ç‚¹å‡»æ—¶å€™ï¼Œä¿®æ”¹è¿™ä¸ª this.state.animateRightValue çš„å€¼ï¼Œå®ç°åŠ¨ç”»æ•ˆæœï¼Œ
![clipboard.png](/img/bVbtfY2)

Animatedæœ‰å‡ ä¸ªåŠ¨ç”»ï¼ˆï¼‰ï¼Œè¿™é‡Œé‡‡ç”¨äº†timing,ä»–æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ç›‘å¬çš„åŠ¨ç”»å€¼ï¼Œå¦ä¸€ä¸ªæ˜¯è¿™ä¸ªå€¼çš„é…ç½®ï¼Œé…ç½®åŠ¨ç”»æ–¹å¼ï¼ŒåŠ¨ç”»æ—¶é—´ç­‰ã€‚

![clipboard.png](/img/bVbtfZv)

è¿™ä¸ªé¡µé¢ä¹Ÿæ²¡æœ‰å¤æ‚çš„é¡µé¢é€»è¾‘ï¼ŒåŸºæœ¬ä¸€çœ‹å°±çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œä¸€äº›è¯­æ³• api ä¸ä¼šçš„è¯ï¼Œå¯ä»¥ä¸Šå®˜ç½‘lou ä¸€çœ¼ï¼š

![clipboard.png](/img/bVbtgdR)

##### è°ƒæ¥å£çš„é¡µé¢ friendCircle
è¿™ä¸ªé¡µé¢è°ƒç”¨äº†ä¸€ä¸ªåˆ†é¡µæ¥å£ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œé•¿åˆ—è¡¨çš„ç»„ä»¶ç”¨çš„æ˜¯RN åŸç”Ÿçš„ FlatList ç»„ä»¶ï¼Œè¿™ä¸ªå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒapi æ–‡æ¡£çœ‹çœ‹ï¼Œ

![clipboard.png](/img/bVbtggg)

ä½†æ˜¯å°±ä¸ªäººä½¿ç”¨ä¹‹åçš„æ„Ÿè§‰è€Œè¨€ï¼Œè¿™ä¸ªçœŸæ­£è¦ç”¨åˆ°ç”Ÿäº§ï¼Œè¿˜å¾—è¦ç¨å¾®æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚loadingèŠèŠ±å›¾ç‰‡è¦æ”¹ä¸€æ”¹ã€‚
åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°componentDidMount é‡Œé¢ï¼Œè°ƒç”¨æˆ‘ä»¬çš„æ¥å£ã€‚è¯´é“è¿™é‡Œï¼Œæˆ‘ä»¬å¼•å‡ºäº†æ¥å£å°è£…é—®é¢˜ï¼Œç”¨çš„æ˜¯è‡ªå¸¦çš„fetchï¼Œè¿™ä¸ªfetch åº•å±‚å…·ä½“æˆ‘ä»¬å°±ä¸è€ƒè™‘æ€ä¹ˆå®ç°çš„ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å¯¹fetch å°è£…ä¸€ä¸‹ï¼Œæ–¹ä¾¿åé¢åœ¨å¤šå¤„ä½¿ç”¨ï¼Œfetch å°è£…å¦‚ä¸‹ï¼š
```
let base_url = 'https://api.scampus.cn';  //æœåŠ¡å™¨åŸºæœ¬åœ°å€
// let base_url = 'http://18.10.1.115:4000';  //æœåŠ¡å™¨åŸºæœ¬åœ°å€
let token = '';   
/**
 * @param {string} url æ¥å£åœ°å€
 * @param {string} method è¯·æ±‚æ–¹æ³•ï¼šGETã€POSTï¼Œåªèƒ½å¤§å†™
 * @param {JSON} [params=''] bodyçš„è¯·æ±‚å‚æ•°ï¼Œé»˜è®¤ä¸ºç©º
 * @return è¿”å›Promise
 */
const  fetchRequest = (url, method, params = '') => {
    let header = {
        "Content-Type": "application/json;charset=UTF-8",
        "accesstoken":token  //ç”¨æˆ·ç™»é™†åè¿”å›çš„tokenï¼ŒæŸäº›æ¶‰åŠç”¨æˆ·æ•°æ®çš„æ¥å£éœ€è¦åœ¨headerä¸­åŠ ä¸Štoken
    };
    if(params == ''){   //å¦‚æœç½‘ç»œè¯·æ±‚ä¸­å¸¦æœ‰å‚æ•°
        return new Promise(function (resolve, reject) {
            fetch(base_url + url, {
                method: method,
                headers: header
            }).then((response) => response.json())
                .then((responseData) => {
                    resolve(responseData);
                })
                .catch( (err) => {
                    reject(err);
                });
        });
    } else{   //å¦‚æœç½‘ç»œè¯·æ±‚ä¸­æ²¡æœ‰å‚æ•°
        return new Promise(function (resolve, reject) {
            fetch(base_url + url, {
                method: method,
                headers: header,
                body:JSON.stringify(params)   //bodyå‚æ•°ï¼Œé€šå¸¸éœ€è¦è½¬æ¢æˆå­—ç¬¦ä¸²åæœåŠ¡å™¨æ‰èƒ½è§£æ
            }).then((response) => response.json())
                .then((responseData) => {
                    resolve(responseData);
                })
                .catch( (err) => {
                    reject(err);
                });
        });
    }
}

export default fetchRequest

```
ä½¿ç”¨Promise å¤„ç†å¼‚æ­¥é—®é¢˜ï¼Œå°†æˆ‘ä»¬æœ€åçš„éœ€è¦çš„æ•°æ®ç»Ÿç»Ÿresolve å‡ºå»ã€‚å°è£…ä¸­è§„ä¸­è·ï¼ŒåŸºæœ¬æ˜¯æŒ‰ç…§æ–‡æ¡£è¯´æ˜ fetch çš„ç”¨æ³•ï¼Œç¨åŠ ä¿®æ”¹

![clipboard.png](/img/bVbtgh2)
##### è°ƒç”¨å¦‚ä¸‹ï¼š

![clipboard.png](/img/bVbtsr8)

### 4ã€ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å›¾æ ‡
npm install -S react-native-vector-icons 
å›¾æ ‡åœ°å€: https://oblador.github.io/react-native-vector-icons/  æ³¨æ„è¿™ç«™ç‚¹ä¸æ˜¯å›¾æ ‡å…¨éƒ¨å¯ç”¨ï¼Œæ»šåŠ¨æ¡å¿«é€Ÿæ‰¾åˆ°ä¸­é—´ä½ç½®ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬éœ€è¦çš„å›¾æ ‡ã€‚
ä½¿ç”¨ï¼š <Icon name="ios-arrow-forward" size={18} color="#333" ></Icon>  name å€¼å¯ä»¥åœ¨ä¸Šé¢çš„åœ°å€ä¸­å¯»æ‰¾ï¼Œå“ªä¸ªåˆé€‚å°±ç”¨å“ªä¸ªï¼Œ
å°±ä¸ªäººçœ‹æ¥ï¼Œè¿™ä¸ªå›¾æ ‡åº“åŸºæœ¬å¤Ÿå¼€å‘ä½¿ç”¨ï¼Œå¦‚æœä¸å¤Ÿå¯ä»¥ç»§ç»­å¼•ç”¨å­—ä½“å›¾æ ‡åº“ã€‚

### 5ã€è°ƒç”¨æ‰‹æœºç¡¬ä»¶è®¾å¤‡-æ‘„åƒå¤´
å…·ä½“æ¼”ç¤ºå®ä¾‹ï¼Œæ‹ç…§åŠŸèƒ½ï¼Œç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œhttps://github.com/react-native-community/react-native-camera/blob/master/docs/RNCamera.md

å®‰è£…ï¼š npm install -S react-native-camera
ä½¿ç”¨ï¼šimport { RNCamera } from 'react-native-camera';

```
<View style={styles.container}>
    <RNCamera
        ref={ref => {
            this.camera = ref;
        }}
        style={styles.preview}
        type={ this.state.cameraType}
        flashMode={RNCamera.Constants.FlashMode.on}
        autoFocus={RNCamera.Constants.AutoFocus.on}
        androidCameraPermissionOptions={{
            title: 'Permission to use camera',
            message: 'We need your permission to use your camera',
            buttonPositive: 'Ok',
            buttonNegative: 'Cancel',
        }}
        androidRecordAudioPermissionOptions={{
            title: 'Permission to use audio recording',
            message: 'We need your permission to use your audio',
            buttonPositive: 'Ok',
            buttonNegative: 'Cancel',
        }}
        onGoogleVisionBarcodesDetected={({ barcodes }) => {
            console.log(barcodes);
        }}
    >
        {({ camera, status, recordAudioPermissionStatus }) => {
            if (status !== 'READY') return <PendingView />;
            return (
            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-around',marginBottom: 20 }}>
                <TouchableOpacity onPress={() => this.takePicture(camera)} style={styles.capture}>
                    <Text style={{ fontSize: 14 }}> æ‹ç…§ </Text>
                </TouchableOpacity>
                <TouchableOpacity onPress={this.swtichCamera} style={styles.capture}>
                    <Icon name="ios-reverse-camera" size={18} color="#333"></Icon>
                </TouchableOpacity>

                <TouchableOpacity onPress={this.lookAlbum} style={styles.imgPreview}>
                        <Image
                            style={styles.imgPreview}
                            source={{uri: this.state.currentUri || 'https://yyb.gtimg.com/aiplat/page/product/visionimgidy/img/demo6-16a47e5d31.jpg?', isStatic: true}}
                        />
                    </TouchableOpacity>
                    
                </View>
                );
            }}
        </RNCamera>
    </View>
```

åœ¨ç»„ä»¶é‡Œé¢å¯ä»¥å®šä¹‰ç…§ç›¸æœºç•Œé¢çš„uiï¼Œå¯ä»¥è‡ªå®šä¹‰æ‹ç…§æŒ‰é’®ï¼Œåˆ‡æ¢æ‘„åƒå¤´çš„æŒ‰é’®ï¼Œæ‹ç…§å›¾ç‰‡é¢„è§ˆç­‰ï¼Œè°ƒç”¨api ä¸éš¾ï¼Œé—®é¢˜éš¾ç‚¹åœ¨é…ç½®è°ƒç”¨çš„æ–‡ä»¶ï¼Œä½ å¾—æœ‰æƒé™è°ƒç”¨åŸç”Ÿçš„è®¾å¤‡ã€‚
1ã€ä¿®æ”¹android/gradle/wrapper/gradle-wrapper.properties
    ```
    distributionUrl=https\://services.gradle.org/distributions/gradle-4.10.1-all.zip
    
    ```
2ã€ä¿®æ”¹android/app/build.gradle
```
missingDimensionStrategy 'react-native-camera', 'general'
```
![clipboard.png](/img/bVbtgoF)

åœ¨å®é™…å®‰è£…ä½¿ç”¨çš„æ—¶å€™ä¼šæœ‰ç›¸å…³çš„æç¤ºæŠ¥é”™ï¼ŒæŒ‰ç…§æŠ¥é”™ä¿¡æ¯å»å¯»æ‰¾è§£å†³åŠæ³•ï¼Œè¿™é‡Œè¿˜æ˜¯å¾—æ¨ègithubï¼Œä¸Šé¢æœ‰å¾ˆå¤šç±»ä¼¼çš„é—®é¢˜ï¼Œå¯ä»¥è€å¿ƒæ‰¾æ‰¾ã€‚

### 6ã€ç»“è¨€
   ä»ä¸€å¼€å§‹äº†è§£RN åˆ°æœ€åä¸Šæ‰‹demoï¼Œåˆ°ç°åœ¨é™†ç»­ä¿®æ”¹é¡¹ç›®ï¼Œå·®ä¸å¤šåå¤©æ—¶é—´ï¼Œæœ¬äººçš„æŠ€æœ¯æ ˆæ˜¯vue,react å¹¶æ²¡æœ‰ç”Ÿäº§é¡¹ç›®ï¼Œçœ‹çœ‹æ–‡æ¡£ï¼ŒåŸºæœ¬å¯ä»¥ä¸Šæ‰‹ã€‚æ€»ç»“è€Œè¨€ï¼Œä½¿ç”¨ä¸€äº›åŸºæœ¬çš„åŠŸèƒ½ï¼Œå¹¶ä¸éš¾ï¼Œæ–‡æ¡£å¾ˆå…¨ï¼Œä½¿ç”¨çš„ç¾¤ä½“å¾ˆå¤§ï¼Œæ‰€ä»¥é‡åˆ°çš„é—®é¢˜ä¹Ÿå¯ä»¥åœ¨ç›¸å…³ç¤¾åŒºæ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ³•æˆ–è€…æ›¿æ¢æ–¹æ¡ˆã€‚è¿˜æ²¡æœ‰å…·ä½“å¼€å‘ç”Ÿäº§é¡¹ç›®ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æˆ‘å°†è¦é¢ä¸´çš„é—®é¢˜ï¼Œåº”è¯¥åœ¨ä½“éªŒä¼˜åŒ–ä¸Šï¼Œæ¯”å¦‚è¿‡æ¸¡åŠ¨ç”»ï¼Œä¸Šæ‹‰ä¸‹æ‹‰åˆ·æ–°åŠ è½½ï¼Œåˆ‡æ¢è§†å›¾ï¼›é›†æˆç¬¬ä¸‰æ–¹åº“ï¼Œè°ƒç”¨ç¡¬ä»¶è®¾å¤‡ï¼›æ€§èƒ½ä¼˜åŒ–é—®é¢˜ç­‰ã€‚

### 7ã€TODO
åé¢æœ‰æ—¶é—´ï¼Œç»§ç»­æŠŠè¿™ä¸ªé¡¹ç›®åšä¸‹å»ï¼Œ
 - ç™»å½•æ³¨å†Œ
 - èŠå¤©ï¼Œåé¢é›†æˆèŠå¤©æœºå™¨äºº
 - é€šè®¯å½•çš„äººå‘˜åˆ†ç»„ï¼Œç°åœ¨å› ä¸ºæ˜¯åå°æ¥å£è¿˜æ²¡æœ‰å®Œæˆï¼Œåªæ˜¯æœ¬åœ°é€ äº†ä¸€ä¸ªæ•°æ®
 - æ‰«ç åŠŸèƒ½
 - å‘åŠ¨æ€
 - é›†æˆåœ°å›¾
 - æ‹ç…§åï¼Œå›¾åƒè¯†åˆ«

å¦‚æœæœ‰å…´è¶£çš„åŒå­¦æ¬¢è¿åŠ å…¥ä¸€èµ·å®Œæˆã€‚
react-native çš„åœ°å€ï¼šhttps://github.com/adouwt/react-native-wx
nodejsçš„åå°åœ°å€ï¼š https://github.com/adouwt/nodejsAPI




### -1ã€ç›¸å…³é”™è¯¯å¤„ç†
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
   

 - react-native-camera æ’ä»¶çš„ä½¿ç”¨é—®é¢˜ï¼š

 ![å›¾ç‰‡æè¿°][3]
    è§£å†³ï¼š https://github.com/react-native-community/react-native-camera/issues/2150


 - ç¼–è¯‘é—®é¢˜

![å›¾ç‰‡æè¿°][4]
```
    è§£å†³ï¼š cd android   &&  ./gradlew clean
```

 - Unable to resolve module 'scheduler/tracing' in ReactNative

    
    è§£å†³ï¼š yarn add @babel/runtime@7.0.0  å†é‡æ–°è·‘ react-native run-android
    


----------


  å¼€å‘ä¸­è¿˜é‡åˆ°äº†å…¶ä»–é—®é¢˜ï¼Œä½†æ˜¯å¿˜äº†åšè®°å½• ~~ RN æš‚æ—¶â€œæ”¾å¼ƒâ€ï¼Œæ¥ä¸‹æ¥è¦ä½¿ç”¨ flutterï¼Œæ‰“ç®—ä¸¤å‘¨å å‡ºä¸€ä¸ªflutterç‰ˆæœ¬ã€‚  


----------
--2019-6-4 æ›´æ–°
æœ€è¿‘æŠ½ç©ºåœ¨æ’¸ flutterçš„ç‰ˆæœ¬ï¼š
githubï¼š [flutter_wx](https://github.com/adouwt/flutter-wx) æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å…ˆç‚¹è¿›å»çœ‹çœ‹ï¼Œåé¢åæŠ½ç©ºè¿­ä»£å¼€å‘ã€‚



  [1]: /img/bVbtfYA
  [2]: /img/bVbtgvE
  [3]: /img/bVbtgvb
  [4]: /img/bVbtgvv
